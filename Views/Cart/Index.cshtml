@model List<items>

@{
    ViewData["Title"] = "Generate Bill";
}

<h1>@ViewData["Title"]</h1>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>


<form asp-controller="Cart" asp-action="Search" method="post">
    <div class="input-group mb-3">
        <input type="text" name="searchTerm" class="form-control" placeholder="Search">
        <div class="input-group-append">
            <button class="btn btn-secondary" type="submit">Search</button>
        </div>
    </div>
</form>


<hr />


<div class="row">
    <div class="col-md-7">
        <h2>Items</h2>

        <table class="table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var obj in Model)
                {
                    <tr>
                        <td id="Name_@obj.Id">@obj.Name</td>
                        <td>@obj.Type</td>
                        <td id="Price_@obj.Id">@obj.Price</td>
                        <td>
                            <input class="form-control form-control-sm"type="number" min="1" max="@obj.Count" id="Count_@obj.Id" />
                        </td>
                        <td>
                            <button class="badge bg-primary" onclick="addToCart('@obj.Id')"><i class="bi bi-bag"></i>Add to Cart</button>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
    <div class="col-md-5">
        <h2>Customer Information</h2>
        <form id="customerInfoForm">
            <div>
                <label for="customerName">Customer Name:</label>
                <input class="form-control" id="customerName" name="customerName">
            </div>
            <br />
            <div>
                <label for="phoneNumber">Phone Number:</label>
                <input class="form-control" id="phoneNumber" name="phoneNumber">
            </div>
            <br />
            <button type="submit" class="btn btn-primary" onclick="addCustomerInfo(event)">Submit</button>
        </form>
    </div>
</div>

<div class="row border p-3 mt-4 mx-auto" style="width: 800px;">
    <div class="col-md-12 d-flex justify-content-between align-items-center">
        <h2>Cart</h2>
        <button class="btn btn-danger" onclick="clearCart()">Clear</button>
    </div>
    <div id="cart">
        <!-- Cart items will be displayed here -->
    </div>
    <!-- VAT Rate & Discount -->
    <div>
        VAT Rate (%): <input class="form-control form-control-sm" type="number" id="vatRateInput" value="0" min="0" style="width: 150px;">
        <br />
        Discount (%): <input class="form-control form-control-sm" type="number" id="discountInput" value="0" min="0" style="width: 150px;">
        <br />
        <button class="badge bg-info" onclick="applyVatAndDiscount()">Apply VAT & Discount</button>
        <br />
        <br />
    </div>
    <!-- Total Price -->
    <hr />
    <div class="text-success" id="totalPrice" style="font-weight: bold; font-size: larger;">Total Price: 0.00</div>
    <br />
    <br />
    <!-- Generate PDF Button -->
    <!-- Finalize Bill Button -->
    <button class="badge bg-info" style="width: 100px;" onclick="finalizeBill()">Finalize Bill</button>

    <button class="badge bg-info" style="width: 100px;" onclick="generatePDF()">Generate PDF</button>
</div>


<script src="~/js/site.js"></script>


